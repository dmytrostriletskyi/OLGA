{% extends 'charts/base.html' %}
{% load static %}
{% block head %}
    <script src="https://cdn.plot.ly/plotly-1.27.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <link rel="stylesheet" href="{% static 'charts/edits.css' %}">
{% endblock %}

{% block body %}
    <script>

        // Define JS global vars to work with external graph.js file.
        var timeline = JSON.parse('["2016-02-19", "2016-03-15", "2016-03-25", "2016-03-28", "2016-04-01", "2016-04-02", "2016-04-07", "2016-04-13", "2016-07-14", "2016-07-21", "2016-07-25", "2016-08-11", "2016-08-12", "2016-09-14", "2016-09-26", "2016-10-02", "2016-10-04", "2016-10-06", "2016-10-07", "2016-10-08", "2016-10-09", "2016-10-11", "2016-10-12", "2016-10-13", "2016-10-14", "2016-10-15", "2016-10-17", "2016-10-18", "2016-10-19", "2016-10-20", "2016-10-25", "2016-10-27", "2016-10-28", "2016-10-30", "2016-10-31", "2016-11-02", "2016-11-04", "2016-11-05", "2016-11-09", "2016-11-11", "2016-11-12", "2016-11-15", "2016-11-21", "2016-11-25", "2016-11-27", "2016-11-30", "2016-12-02", "2016-12-05", "2016-12-06", "2016-12-07", "2016-12-12", "2016-12-13", "2016-12-14", "2016-12-16", "2016-12-19", "2016-12-21", "2016-12-24", "2016-12-28", "2016-12-29", "2017-01-03", "2017-01-04", "2017-01-05", "2017-01-07", "2017-01-09", "2017-01-11", "2017-01-13", "2017-01-15", "2017-01-19", "2017-01-20", "2017-01-21", "2017-01-22", "2017-01-23", "2017-01-24", "2017-01-25", "2017-01-26", "2017-01-27", "2017-01-28", "2017-01-29", "2017-01-30", "2017-01-31", "2017-02-01", "2017-02-02", "2017-02-03", "2017-02-04", "2017-02-07", "2017-02-08", "2017-02-10", "2017-02-11", "2017-02-13", "2017-02-14", "2017-02-15", "2017-02-19", "2017-02-21", "2017-02-22", "2017-02-23", "2017-02-27", "2017-03-01", "2017-03-02", "2017-03-03", "2017-03-06", "2017-03-07", "2017-03-09", "2017-03-13", "2017-03-14", "2017-03-15", "2017-03-16", "2017-03-18", "2017-03-20", "2017-03-21", "2017-03-23", "2017-03-24", "2017-03-26", "2017-03-27", "2017-03-28", "2017-03-29", "2017-03-30", "2017-04-05", "2017-04-07", "2017-04-09", "2017-04-17", "2017-04-18", "2017-04-19", "2017-04-21", "2017-04-25", "2017-05-02", "2017-05-04", "2017-05-05", "2017-05-08", "2017-05-11", "2017-05-13", "2017-05-18", "2017-05-19", "2017-05-21", "2017-05-22", "2017-05-23", "2017-05-24", "2017-05-25", "2017-05-31", "2017-06-02", "2017-06-04", "2017-06-07", "2017-06-12", "2017-06-23", "2017-06-24", "2017-06-26", "2017-06-27", "2017-06-29", "2017-07-03", "2017-07-06", "2017-07-10", "2017-07-12", "2017-07-16", "2017-07-18", "2017-07-22", "2017-07-23", "2017-07-24", "2017-07-31", "2017-08-08", "2017-08-10", "2017-08-12", "2017-08-15", "2017-08-16", "2017-08-17", "2017-08-18", "2017-08-22", "2017-08-24", "2017-08-28", "2017-08-29", "2017-09-01", "2017-09-05", "2017-09-07", "2017-09-08", "2017-09-10", "2017-09-12", "2017-09-15", "2017-09-20", "2017-09-21", "2017-09-25", "2017-09-26", "2017-09-27", "2017-09-30", "2017-10-03", "2017-10-04", "2017-10-06", "2017-10-07", "2017-10-08", "2017-10-11", "2017-10-12", "2017-10-13", "2017-10-14", "2017-10-15", "2017-10-16", "2017-10-17", "2017-10-18", "2017-10-19", "2017-10-20", "2017-10-21", "2017-10-22", "2017-10-23", "2017-10-24", "2017-10-25", "2017-10-26", "2017-10-27", "2017-10-28", "2017-10-29", "2017-10-30", "2017-10-31", "2017-11-01", "2017-11-02", "2017-11-03", "2017-11-04", "2017-11-05", "2017-11-06", "2017-11-07", "2017-11-08", "2017-11-09", "2017-11-10", "2017-11-11", "2017-11-12", "2017-11-13", "2017-11-14", "2017-11-15", "2017-11-16", "2017-11-17", "2017-11-18", "2017-11-19", "2017-11-20", "2017-11-21", "2017-11-22", "2017-11-23", "2017-11-24", "2017-11-25", "2017-11-26", "2017-11-27", "2017-11-28", "2017-11-29", "2017-11-30", "2017-12-01", "2017-12-02", "2017-12-03", "2017-12-04", "2017-12-05", "2017-12-06", "2017-12-07", "2017-12-08", "2017-12-09", "2017-12-10", "2017-12-11", "2017-12-12", "2017-12-13", "2017-12-14", "2017-12-15", "2017-12-16", "2017-12-17", "2017-12-18", "2017-12-19", "2017-12-20", "2017-12-21", "2017-12-22", "2017-12-23", "2017-12-24", "2017-12-25", "2017-12-26", "2017-12-27", "2017-12-28", "2017-12-29", "2017-12-30", "2017-12-31", "2018-01-01", "2018-01-02", "2018-01-03", "2018-01-04", "2018-01-05", "2018-01-06", "2018-01-07", "2018-01-08", "2018-01-09", "2018-01-10", "2018-01-11", "2018-01-12", "2018-01-13", "2018-01-14", "2018-01-15", "2018-01-16", "2018-01-17", "2018-01-18", "2018-01-19", "2018-01-20", "2018-01-21", "2018-01-22", "2018-01-23", "2018-01-24", "2018-01-25", "2018-01-26", "2018-01-27", "2018-01-28", "2018-01-29", "2018-01-30", "2018-01-31", "2018-02-01", "2018-02-02", "2018-02-03", "2018-02-04", "2018-02-05", "2018-02-06", "2018-02-07", "2018-02-08", "2018-02-09", "2018-02-10", "2018-02-11", "2018-02-12", "2018-02-13", "2018-02-14", "2018-02-15", "2018-02-16", "2018-02-17", "2018-02-18", "2018-02-19", "2018-02-20", "2018-02-21", "2018-02-22", "2018-02-23", "2018-02-24", "2018-02-25", "2018-02-26", "2018-02-27", "2018-02-28", "2018-03-01", "2018-03-02", "2018-03-03", "2018-03-04", "2018-03-05", "2018-03-06", "2018-03-07", "2018-03-08", "2018-03-09", "2018-03-10", "2018-03-11", "2018-03-12", "2018-03-13", "2018-03-14", "2018-03-15", "2018-03-16", "2018-03-17", "2018-03-18", "2018-03-19", "2018-03-20", "2018-03-21", "2018-03-22", "2018-03-23", "2018-03-24", "2018-03-25", "2018-03-26", "2018-03-27", "2018-03-28", "2018-03-29", "2018-03-30", "2018-03-31", "2018-04-01", "2018-04-02", "2018-04-03", "2018-04-04", "2018-04-05", "2018-04-06", "2018-04-07", "2018-04-08", "2018-04-09", "2018-04-10", "2018-04-11", "2018-04-12", "2018-04-13", "2018-04-14", "2018-04-15", "2018-04-16", "2018-04-17", "2018-04-18", "2018-04-19", "2018-04-20", "2018-04-21", "2018-04-22", "2018-04-23", "2018-04-24", "2018-04-25", "2018-04-26", "2018-04-27", "2018-04-28", "2018-04-29", "2018-04-30", "2018-05-01", "2018-05-02", "2018-05-03", "2018-05-04", "2018-05-05", "2018-05-06", "2018-05-07", "2018-05-08", "2018-05-09", "2018-05-10", "2018-05-11", "2018-05-12", "2018-05-13", "2018-05-14", "2018-05-15", "2018-05-16", "2018-05-17", "2018-05-18", "2018-05-19", "2018-05-20", "2018-05-21", "2018-05-22", "2018-05-23", "2018-05-24", "2018-05-25", "2018-05-26", "2018-05-27", "2018-05-28", "2018-05-29", "2018-05-30"]');
        var students = JSON.parse('[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 9, 3, 4, 1, 6, 10, 11, 9, 4, 11, 12, 9, 8, 10, 6, 6, 5, 7, 14, 27, 10, 6, 8, 4, 13, 17, 18, 13, 14, 6, 9, 22, 14, 14, 10, 18, 10, 8, 21, 29, 22, 17, 15, 8, 5, 16, 16, 14, 14, 11, 8, 14, 16, 14, 13, 14, 10, 7, 3, 10, 12, 16, 11, 8, 8, 5, 10, 5, 17, 6, 7, 5, 6, 3, 6, 15, 10, 10, 9, 4, 4, 16, 17, 13, 15, 6, 6, 7, 14, 15, 15, 26, 15, 5, 13, 18, 12, 23, 23, 6, 12, 18, 37, 19, 20, 15, 15, 26, 30, 28, 19, 20, 25, 18, 19, 31, 24, 19, 36, 73, 26, 23, 80, 55, 45, 93, 46, 23, 29, 55, 59, 58, 47, 63, 32, 23, 61, 69, 81, 131, 126, 24, 27, 140, 130, 133, 132, 124, 22, 16, 132, 193, 154, 141, 95, 15, 18, 137, 131, 157, 108, 89, 25, 23, 109, 117, 149, 165, 117, 20, 17, 33, 114, 133, 136, 105, 21, 21, 115, 140, 133, 115, 105, 11, 20, 105, 132, 99, 85, 98, 14, 13, 95, 149, 159, 149, 114, 12, 10, 76, 31, 100, 95, 69, 22, 20, 107, 144, 154, 54, 80, 22, 19, 128, 198, 171, 148, 139, 18, 19, 47, 160, 137, 311, 277, 24, 27, 217, 224, 3]');
        var courses = JSON.parse('[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 482, 482, 482, 482, 482, 482, 482, 483, 484, 484, 484, 485, 485, 485, 486, 487, 487, 487, 487, 487, 490, 491, 491, 491, 491, 492, 492, 493, 493, 494, 494, 494, 494, 496, 496, 497, 494, 494, 494, 495, 495, 496, 496, 497, 497, 497, 498, 498, 498, 498, 498, 499, 499, 499, 499, 499, 499, 500, 500, 500, 500, 500, 502, 502, 503, 503, 503, 503, 503, 504, 504, 504, 504, 504, 504, 504, 504, 504, 504, 504, 504, 504, 506, 512, 556, 566, 566, 566, 566, 566, 566, 566, 566, 566, 566, 567, 567, 567, 676, 676, 653, 653, 653, 654, 654, 654, 654, 654, 654, 575, 575, 575, 531, 556, 497, 497, 447, 447, 449, 1027, 1109, 1109, 1109, 1111, 1117, 1117, 1123, 1124, 1124, 1124, 1126, 1126, 1128, 1129, 1134, 1134, 1134, 1134, 1134, 1135, 1143, 1143, 1143, 1143, 1141, 1142, 1154, 1156, 1157, 1158, 1158, 1158, 1162, 1171, 1187, 1206, 1232, 1233, 1241, 1256, 1256, 1256, 1256, 1256, 1256, 1257, 1257, 1258, 1274, 1275, 1281, 1282, 1282, 1290, 1290, 1294, 1295, 1307, 1307, 1308, 1315, 1315, 1316, 1310, 1310, 1310, 1310, 1311, 1313, 1314, 1316, 1316, 1316, 1317, 1317, 1317, 1371, 1320, 1320, 1320, 1322, 1326, 1345, 1352, 1398, 1398, 1398, 1417, 1427, 1429, 1434, 1443, 1443, 1443, 1446, 1472, 1528, 1507, 1507, 1507, 1507, 1540, 1541, 1400, 1518, 1448, 1472, 1450, 1450, 1544, 458]');
        var instances = JSON.parse('[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4, 4, 4, 4, 4, 4, 4, 4, 3, 3, 4, 4, 4, 3, 4, 4, 3, 3, 3, 3, 3, 4, 4, 4, 3, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 3, 3, 3, 4, 3, 3, 4, 4, 3, 3, 4, 4, 4, 3, 3, 4, 3, 3, 3, 3, 3, 4, 4, 3, 4, 3, 3, 4, 3, 3, 3, 4, 3, 3, 3, 4, 3, 4, 3, 3, 4, 3, 4, 3, 3, 3, 3, 3, 3, 4, 6, 5, 5, 6, 6, 5, 6, 6, 5, 5, 5, 5, 5, 7, 7, 6, 7, 7, 6, 6, 7, 6, 6, 7, 7, 7, 6, 5, 7, 8, 8, 8, 8, 8, 13, 15, 15, 14, 15, 14, 14, 14, 14, 14, 14, 14, 15, 15, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 14, 15, 14, 13, 14, 14, 13, 13, 13, 13, 13, 14, 13, 13, 14, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 13, 13, 13, 13, 13, 13, 14, 13, 13, 13, 13, 13, 14, 14, 14, 13, 13, 13, 13, 13, 13, 15, 14, 13, 13, 14, 14, 14, 13, 14, 13, 13, 14, 13, 13, 14, 13, 14, 13, 13, 13, 13, 12, 13, 12, 12, 15, 15, 13, 16, 13, 13, 12, 12, 12, 2]');

        var newData = {
            'total_registered_students': 34589,
            'total_generated_certificates': 483,
            'monthly': {
                '2018-01': [1734, 480, 675],
                '2018-05': [1478, 300, 895],
                '2018-02': [893, 260, 473],
                '2018-03': [2108, 370, 580],
                '2018-04': [1204, 240, 934],
            }
        }
    </script>

<div id="wrap-content-push-footer-sock">
    <a id="skip" href="#content" class="skip-link">Skip to content</a>

        {#NAVBAR#}
        <nav class="navbar navbar-default lens-nav" role="navigation" aria-label="Application">
            <div class="grid-container">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <button class="dropdown-toggle navbar-link" data-toggle="dropdown" id="lensPrimaryMenu"
                                aria-controls="lensDropdownMenu" aria-haspopup="true" aria-expanded="false">

                            <span class="link-label">
                                Engagement
                            </span>
                        </button>
                    </li>

                    <li class="active nav-section">
                        <a href="{% url 'charts:charts' %}" data-track-type="click"
                           data-track-event="edx.bi.ui.menu.navigated" data-track-text="Content"
                           data-track-url="#" data-track-target-scope="course" data-track-target-lens="engagement"
                           data-track-target-report="content" data-track-target-depth="" data-track-menu-depth="report"
                           data-track-link-name="content">

                            <span class="link-label">
                                Numbers <span class="sr-only">(Active)</span>
                            </span>
                        </a>
                    </li>

                    <li class=" nav-section">
                        <a href="{% url 'charts:map' %}" data-track-type="click"
                           data-track-event="edx.bi.ui.menu.navigated" data-track-text="Videos"
                           data-track-url="#"
                           data-track-target-scope="course" data-track-target-lens="engagement"
                           data-track-target-report="videos" data-track-target-depth=""
                           data-track-menu-depth="report" data-track-link-name="videos">

                            <span class="link-label">Geography</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="grid-container grid-manual">
            <div class="row">
                <main class="col col-12 sm-col-12 main" id="content" aria-label="Application">
                    <div class="view-head"></div>
                        <div class="view-intro row">
                        <p class="lead text-muted intro-text"></p>
                    </div>

                    {#METRICS#}
                    <section class="view-section">
                        <div class="section-heading bordered">
                            <h4 class="section-title">Global Activity Metrics</h4>
                        </div>
                        <div class="row">
                            <div class="col col-12 sm-col-12 md-col-2" data-activity-type="any">
                                <div class="summary-point text-center">
                                    <div class="summary-point-wrapper"><div class="summary-point-number" title="{{ instances_count }}">{{ instances_count }}</div><div class="summary-point-label">Instances</div></div>
                                </div>
                            </div>
                            <div class="col col-12 sm-col-12 md-col-2" data-activity-type="any">
                                <div class="summary-point text-center">
                                    <div class="summary-point-wrapper"><div class="summary-point-number" title="{{ courses_count }}">{{ courses_count }}</div><div class="summary-point-label">Courses</div></div>
                                </div>
                            </div>
                            <div class="col col-12 sm-col-12 md-col-2" data-activity-type="any">
                                <div class="summary-point text-center">
                                    <div class="summary-point-wrapper"><div class="summary-point-number" title="{{ students_count }}">{{ students_count }}</div><div class="summary-point-label">Active Students</div></div>
                                </div>
                            </div>
                            <div class="col col-12 sm-col-12 md-col-3" data-activity-type="any">
                                <div class="summary-point text-center">
                                    <div class="summary-point-wrapper"><div class="summary-point-number" title="{{ total_generated_certificates }}" id="js-total-cert">{{ total_generated_certificates }}</div><div class="summary-point-label">Certificates</div></div>
                                </div>
                            </div>
                            <div class="col col-12 sm-col-12 md-col-3" data-activity-type="any">
                                <div class="summary-point text-center">
                                    <div class="summary-point-wrapper"><div class="summary-point-number" title="{{ total_registered_students }}" id="js-total-stud">{{ total_registered_students }}</div><div class="summary-point-label">Total Registered Students</div></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {#CHARTS#}
                    <section class="view-section" aria-hidden="true">
                        <div class="section-heading">
                          <h4 class="section-title">Global Learners Engagement</h4>
                          <span class="section-heading-note small">
                              How many learners are interacting with Open edX courses?
                          </span>
                        </div>
                        <div class="section-content section-data-graph">
                            <div class="section-content section-data-viz">
                                <div class="analytics-chart-container">
                                    <div>
                                        <div>
                                            <div id="instances"></div>
                                            <div id="courses"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {#UPDATE TIME#}

                    <div class="data-update-message">Course engagement data was last updated
                        {{ last_datetime_of_update_data|date:"Y-m-d" }} at {{ last_datetime_of_update_data|date:"H:i" }} UTC+2.
                    </div>
                </main>
            </div>
        </div>

    <!-- Placed at the end of the document so the pages load faster -->
    <div id="footer-sock-push"></div>
</div>
{% endblock %}

{% block footer %}
{% endblock %}

{% block script %}
    <script src="{% static 'charts/graphs.js' %}"></script>
{% endblock %} }}
